# Copyright (c) 2025, Itential, Inc
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)
---
- name: Upload SSL-related files
  when: gateway_client_ssl_upload_certs | bool
  tags: upload_certs
  block:
    - name: Copy application CA certificate file
      ansible.builtin.copy:
        src: "{{ gateway_client_ssl_local_ca_certificate_file }}"
        dest: "{{ gateway_client_application_ca_certificate_file }}"
        owner: root
        group: root
        mode: '0644'
      when: gateway_client_ssl_local_ca_certificate_file is defined

    - name: Copy client certificate
      ansible.builtin.copy:
        src: "{{ gateway_client_ssl_local_certificate_path }}"
        dest: "{{ gateway_client_certificate_file }}"
        owner: root
        group: root
        mode: '0644'
      when: gateway_client_ssl_local_certificate_path is defined

    - name: Copy client private key
      ansible.builtin.copy:
        src: "{{ gateway_client_ssl_local_private_key_path }}"
        dest: "{{ gateway_client_private_key_file }}"
        owner: root
        group: root
        mode: '0644'
      when: gateway_client_ssl_local_private_key_path is defined
