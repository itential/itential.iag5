# Copyright (c) 2025, Itential, Inc
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)
---
- name: Install Python packages
  ansible.builtin.dnf:
    name: "{{ gateway_server_python_packages }}"
    state: present

- name: Create the local bin directory for the gateway user
  ansible.builtin.file:
    name: "{{ gateway_server_local_bin_dir }}"
    state: directory
    owner: "{{ gateway_server_user }}"
    group: "{{ gateway_server_user }}"
    mode: "0755"

- name: Create local python symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ gateway_server_python_executable }}"
    path: "{{ gateway_server_local_bin_dir }}/python"

- name: Create local python3 symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ gateway_server_python_executable }}"
    path: "{{ gateway_server_local_bin_dir }}/python3"

- name: Create local pip symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ gateway_server_pip_executable }}"
    path: "{{ gateway_server_local_bin_dir }}/pip"

- name: Create local pip3 symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ gateway_server_pip_executable }}"
    path: "{{ gateway_server_local_bin_dir }}/pip3"
