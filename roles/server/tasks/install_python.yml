# Copyright (c) 2025, Itential, Inc
# GNU General Public License v3.0+ (see LICENSE or https://www.gnu.org/licenses/gpl-3.0.txt)
---
- name: Install Python packages
  ansible.builtin.dnf:
    name: "{{ server_python_packages }}"
    state: present

- name: Create the local bin directory for the gateway user
  ansible.builtin.file:
    name: "/home/{{ server_user }}/.local/bin"
    state: directory
    owner: "{{ server_user }}"
    group: "{{ server_user }}"
    mode: "0755"

- name: Create local python symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ server_python_executable }}"
    path: "/home/{{ server_user }}/.local/bin/python"

- name: Create local python3 symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ server_python_executable }}"
    path: "/home/{{ server_user }}/.local/bin/python3"

- name: Create local pip symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ server_pip_executable }}"
    path: "/home/{{ server_user }}/.local/bin/pip"

- name: Create local pip3 symlink for gateway user
  ansible.builtin.file:
    state: link
    src: "{{ server_pip_executable }}"
    path: "/home/{{ server_user }}/.local/bin/pip3"
